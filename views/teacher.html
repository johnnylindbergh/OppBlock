<!DOCTYPE html>
<html>
  <head>
        <link rel="stylesheet" href="/style.css" type="text/css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="utf-8">
    <title>Oppblock System: Teacher Portal</title>
    <link rel="stylesheet" href="/style.css" type="text/css"/>
    <style> body {padding: 0; margin: 0;} </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.2/fullcalendar.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.8.2/fullcalendar.min.js"></script>
  </head>
<body>
  <img id = "logo" src="/OppBlockLogoFinal.png">

  <div id= "centralBox">

  <p id= "titleText">Teacher Portal</p>
  <p id= "signedInAs">Welcome, {{teacherName}}!</p>




  {{#currentOffering}}

  <div id="currentOffering">
    <button class="accordion">Current Offering: {{name}}</button>
    <div class="panel">

    <br>
      {{#containsStudents}}
      <h3 style = "font-family: Lucida Grande">Students</h3>
        <table style="width:100%; table-layout:fixed" class="panel">
          <tr class="panel">
            <th class="panel">Name</th>
            <th class="panel">Status</th>
            <th class="panel"></th>
          </tr>
          <form action="/updateAttendance/{{offeringId}}" method="post">
            {{#students}}
              <tr class="panel">
                <td class="panel">{{firstname}} {{lastname}}</td> 
                <td class="panel">
                  <input type ="hidden" name ="allStudents" value ="{{uid_student}}" >
    
                  <input type="checkbox" id ="{{uid_student}}" style="display:none;" name="students" value = "{{uid_student}}" {{#arrived}}checked="checked"{{/arrived}}>
                  <label class="check" for="{{uid_student}}">{{#arrived}}Arrived{{/arrived}}{{^arrived}}Not Arrived{{/arrived}}</label>
                  <td><a class="button" href="/removeStudent/{{uid_day}}/{{uid_offering}}/{{uid_student}}">Remove</a></td> 
                </td> 
  
              </tr>
            {{/students}}
        </table>
  
      <input type="submit" value="Update Attendance"> 
      <br>
    </form>
    {{/containsStudents}}
    {{^containsStudents}}
      No Students.
    {{/containsStudents}}
  
    <form action="/addStudent/{{offeringId}}/{{offeringDay}}" method="post">
      Add Student: 
  
     
        <input type="text"   name="studentName"> 
        
  
         <input type="submit" value="Add">
    
    </form>
</div>
</div>

{{/currentOffering}}



<br>
<br>
<br>
<br>
<br>
  <a class="button" href = "/logout">Logout</a>
	
	<h2>Offerings</h2> 
  <a class="button" href="/add">Add</a>

<table style="width:100%" align="center">

  <tr>
    <th>Edit</th>
    <th>Name</th>
    <th>Location</th>
    <th>Description</th>
    <th>Maximum Size</th>
  </tr>

  {{#data}}
  <tr>
      <td><a class="button" href="/editOffering/{{uid_offering}}/">Edit</a></td> 
      <td>{{offeringName}}</td> 
      <td>{{location}}</td>
      <td>{{description}}</td> 
      <td>{{max_size}}</td> 
  </tr>
  {{/data}}

  </table>
  {{^data}}No Offerings{{/data}}
  </div>

</div>

	
<script>
$(".check").on("click", function(){
  $(this).html() == "Arrived" ? $(this).html('Not Arrived') : $(this).html('Arrived');
});

$(".accordion").click(function() {
  $(".panel").slideToggle();
});
</script>
</body>
</html>